{"version":3,"file":"FiltersForm.bundle.js","sources":["../src/CheckboxCard.js","../src/CheckboxCardModal.js","../src/FiltersForm.js"],"sourcesContent":["import { BitrixVue } from \"ui.vue3\";\nimport { BaseEvent } from \"main.core.events\";\nexport const CheckboxCard = {\n\tname: \"CheckboxCard\",\n\tprops: [\"value\", \"name\"],\n\tdata() {\n\t\treturn {\n\t\t\tchecked: [],\n\t\t};\n\t},\n\tmethods: {\n\t\tfiltered() {\n\t\t\tthis.$Bitrix.eventEmitter.emit(\"filter\", {\n\t\t\t\tname: this.name,\n\t\t\t\tvalues: this.checked,\n\t\t\t});\n\t\t},\n\t},\n\twatch: {\n\t\tchecked() {\n\t\t\tthis.filtered();\n\t\t},\n\t},\n\t/*html*/\n\ttemplate: `\n        <div class=\"select select--js\">\n          <div class=\"select-title select-title--js\">\n            <input type=\"text\" :placeholder=\"value.NAME\" :name=\"name\" :id=\"name\" autocomplete=\"off\">\n            <label :for=\"name\">{{value.NAME}}</label>\n          </div>\n          <div class=\"options options--js\">\n            <div class=\"options_wrapper\">\n              <div class=\"checkbox_wrapper\" v-for=\"variable of value.LIST\">\n                <label class=\"custom-checkbox option-label\">\n                  <input type=\"checkbox\" :value=\"variable.ID\" v-model=\"checked\">\n                  <span class=\"checkbox_content\">{{variable.NAME}}</span>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n  `,\n};\n","import { BitrixVue } from \"ui.vue3\";\nimport { BaseEvent } from \"main.core.events\";\n\nexport const CheckboxCardModal = {\n\tname: \"CheckboxCardModal\",\n\tprops: [\"value\", \"name\"],\n\tdata() {\n\t\treturn {\n\t\t\tchecked: [],\n\t\t\tshowMoreCount: 2,\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.$Bitrix.eventEmitter.subscribe(\"clearFilter\", this.ClearFilter);\n\t},\n\tmethods: {\n\t\tfiltered() {\n\t\t\tconsole.log(this.name);\n\t\t\tthis.$Bitrix.eventEmitter.emit(\"filter\", {\n\t\t\t\tname: this.name,\n\t\t\t\tvalues: this.checked,\n\t\t\t});\n\t\t},\n\t\tshowMore(e) {\n\t\t\tconsole.log($(e).hasClass(\"open\"));\n\t\t\tif ($(e).hasClass(\"open\")) {\n\t\t\t\t$(e).removeClass(\"open\");\n\t\t\t\tlet hBlock = $(e)\n\t\t\t\t\t.parents(\".show-more-filters-wrap--js\")\n\t\t\t\t\t.find(\".show-more-filters-block--js\")\n\t\t\t\t\t.attr(\"data-show-height-block\");\n\t\t\t\t$(e)\n\t\t\t\t\t.parents(\".show-more-filters-wrap--js\")\n\t\t\t\t\t.find(\".show-more-filters-block--js\")\n\t\t\t\t\t.css(\"max-height\", hBlock + \"px\");\n\t\t\t} else {\n\t\t\t\t$(e).addClass(\"open\");\n\t\t\t\tlet hBlock = $(e)\n\t\t\t\t\t.parents(\".show-more-filters-wrap--js\")\n\t\t\t\t\t.find(\".show-more-filters-block--js\")\n\t\t\t\t\t.attr(\"data-height-block\");\n\t\t\t\t$(e.target)\n\t\t\t\t\t.parents(\".show-more-filters-wrap--js\")\n\t\t\t\t\t.find(\".show-more-filters-block--js\")\n\t\t\t\t\t.css(\"max-height\", hBlock + \"px\");\n\t\t\t}\n\t\t},\n\t\tClearFilter() {\n\t\t\tthis.checked = [];\n\t\t},\n\t},\n\twatch: {\n\t\tchecked() {\n\t\t\tthis.filtered();\n\t\t},\n\t},\n\t/*html*/\n\ttemplate: `\n\t\t<div class=\"filter show-more-filters-wrap--js\" :data-show-more-filters=\"showMoreCount\">\n\t\t\t<div class=\"title\">{{value.NAME}}</div>\n\t\t\t<div class=\"filter_wrapper show-more-filters-block--js\">\n\t\t\t\t<div class=\"checkbox_wrapper show-more-filters-elem--js\" v-for=\"variable of value.LIST\">\n\t\t\t\t\t<label class=\"custom-checkbox option-label\">\n\t\t\t\t\t\t<input type=\"checkbox\" :value=\"variable.ID\" v-model=\"checked\">\n\t\t\t\t\t\t<span class=\"checkbox_content\">{{variable.NAME}}</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button @click=\"showMore\" v-if=\"value.LIST.length > showMoreCount\" class=\"arrow-down show-more-filters-btn show-more-filters-btn--js\">Показать ещё</button>\n\t\t</div>\n  `,\n};\n","import { BitrixVue } from \"ui.vue3\";\nimport { CheckboxCard } from \"./CheckboxCard\";\nimport { CheckboxCardModal } from \"./CheckboxCardModal\";\nexport const FiltersForm = BitrixVue.mutableComponent(\"FiltersForm\", {\n\tname: \"FiltersForm\",\n\tprops: [\"FILTERS\", \"FilterClick\"],\n\tcomponents: {\n\t\tCheckboxCard,\n\t\tCheckboxCardModal,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tchecked: [],\n\t\t};\n\t},\n\tmounted() {\n\t\t//Вычисление максимальной высоты и высоты зависимости от кол-ва пунктов в момент открытия модального окна\n\t\tif ($(\".filters-modal.modal--js\").length) {\n\t\t\t$(\".filters-modal.modal--js\").css(\"display\", \"block\");\n\t\t\tconsole.log(\"op\");\n\t\t\t$(\".show-more-filters-wrap--js\").each(function () {\n\t\t\t\tif (\n\t\t\t\t\t$(this).find(\".show-more-filters-elem--js\").length >\n\t\t\t\t\t$(this).attr(\"data-show-more-filters\")\n\t\t\t\t) {\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.find(\".show-more-filters-block--js\")\n\t\t\t\t\t\t.attr(\n\t\t\t\t\t\t\t\"data-height-block\",\n\t\t\t\t\t\t\t$(this).find(\".show-more-filters-block--js\").innerHeight()\n\t\t\t\t\t\t);\n\t\t\t\t\tlet hShowBlock = 0;\n\n\t\t\t\t\tfor (let i = 0; i < $(this).attr(\"data-show-more-filters\"); i++) {\n\t\t\t\t\t\tlet wElem = $(this)\n\t\t\t\t\t\t\t.find(\".show-more-filters-elem--js\")\n\t\t\t\t\t\t\t.eq(i)\n\t\t\t\t\t\t\t.innerHeight();\n\t\t\t\t\t\thShowBlock += wElem;\n\t\t\t\t\t}\n\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.find(\".show-more-filters-block--js\")\n\t\t\t\t\t\t.attr(\"data-show-height-block\", hShowBlock);\n\t\t\t\t\t$(this)\n\t\t\t\t\t\t.find(\".show-more-filters-block--js\")\n\t\t\t\t\t\t.css(\"max-height\", hShowBlock);\n\t\t\t\t\t$(this).find(\".show-more-filters-btn--js\").css(\"display\", \"block\");\n\t\t\t\t}\n\t\t\t});\n\t\t\t$(\".filters-modal.modal--js\").css(\"display\", \"none\");\n\t\t}\n\t},\n\tmethods: {\n\t\tclear() {\n\t\t\tthis.$Bitrix.eventEmitter.emit(\"clearFilter\", {});\n\t\t},\n\t},\n\t/*html*/\n\ttemplate: `\n\n\t<template v-if=\"FILTERS.length != 0\">\n\n\n\t\t<div class=\"filters_wrapper\">\n\t\t\t<CheckboxCard v-for=\"(value, name) in FILTERS\" :key=\"name\" :value=\"value\" :name=\"name\"></CheckboxCard>\n    </div>\n\n\t\t<div class=\"modal filters-modal modal--js\" data-modal=\"filters\">\n\t\t\t<div class=\"modal-wrap-scroll\">\n\t\t\t\t<button class=\"close-btn close-modal--js\">\n\t\t\t\t\t<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path d=\"M13.4868 11.8939L13.3807 12L13.4869 12.1061L17.9428 16.5592C17.9428 16.5592 17.9428 16.5592 17.9428 16.5592C18.126 16.7424 18.2289 16.9909 18.2289 17.25C18.2289 17.5091 18.126 17.7576 17.9428 17.9408C17.7595 18.124 17.5111 18.2269 17.2519 18.2269C16.9928 18.2269 16.7444 18.124 16.5611 17.9408L12.108 13.4877L12.002 13.3816L11.8959 13.4877L7.44276 17.9408C7.25955 18.124 7.01106 18.2269 6.75195 18.2269C6.49285 18.2269 6.24436 18.124 6.06114 17.9408C5.87793 17.7576 5.775 17.5091 5.775 17.25C5.775 16.9909 5.87793 16.7424 6.06114 16.5592L10.5143 12.1061L10.6203 12L10.5143 11.8939L6.06114 7.44081C5.87793 7.25759 5.775 7.0091 5.775 6.75C5.775 6.49089 5.87793 6.2424 6.06114 6.05919C6.24436 5.87598 6.49285 5.77305 6.75195 5.77305C7.01105 5.77305 7.25955 5.87598 7.44276 6.05919L11.8959 10.5123L12.002 10.6184L12.108 10.5123L16.561 6.05928C16.7442 5.87642 16.9926 5.77381 17.2514 5.77404C17.5102 5.77427 17.7584 5.87731 17.9413 6.0605L18.0468 5.95519L17.9413 6.0605C18.1241 6.24369 18.2267 6.49202 18.2265 6.75086C18.2263 7.0097 18.1232 7.25785 17.94 7.44071L17.9399 7.44081L13.4868 11.8939Z\" stroke=\"white\" stroke-width=\"0.3\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t\t<h2 class=\"mb-24-fixed tal not-scroll--js\">Фильтры</h2>\n\n\t\t\t\t<div class=\"filters-modal_wrapper mb-24-fixed scroll-part\">\n\t\t\t\t\t\t<CheckboxCardModal v-for=\"(value, name) in FILTERS\" :key=\"name\" :value=\"value\" :name=\"name\"></CheckboxCardModal>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"filters-modal_btns not-scroll--js\">\n\t\t\t\t\t<a href=\"javascript:void(0)\" class=\"as-button m-0-a green btn_apply--js close-modal--js\">Применить</a>\n\t\t\t\t\t<a @click=\"clear\" href=\"javascript:void(0)\" class=\"m-0-a btn_reset btn_reset--js\">Сбросить все фильтры</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template>\n\n  `,\n});\n"],"names":["CheckboxCard","name","props","data","checked","methods","filtered","$Bitrix","eventEmitter","emit","values","watch","template","CheckboxCardModal","showMoreCount","mounted","subscribe","ClearFilter","console","log","showMore","e","$","hasClass","removeClass","hBlock","parents","find","attr","css","addClass","target","FiltersForm","BitrixVue","mutableComponent","components","length","each","innerHeight","hShowBlock","i","wElem","eq","clear"],"mappings":"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"}