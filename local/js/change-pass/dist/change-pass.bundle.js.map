{"version":3,"file":"change-pass.bundle.js","sources":["../src/SuccessModal.js","../src/ErrorModal.js","../src/change-pass.js"],"sourcesContent":["export const SuccessModal = {\r\n\t/*html*/\r\n\ttemplate: `\r\n  <div style=\"position:relative; z-index:200;\">\r\n    <div @click=\"$emit('closeModal');\" class=\"overlay overlay-js active\"></div>\r\n    <div @click=\"$emit('closeModal');\" class=\"overlay overlay-desktop overlay-desktop-js active\"></div>\r\n    <div class=\"modal-loading-result flex fd-column ai-center active\">\r\n      <div class=\"modal-loading-result__title tac\">{{this.$Bitrix.Loc.getMessage('SUCCESS_SAVED')}}</div>\r\n      <p class=\"tac small\">{{this.$Bitrix.Loc.getMessage('SUCCESS_SAVED_DOP')}}</p>\r\n      <button @click=\"$emit('closeModal');\" class=\"btn-blue p13-24\">{{this.$Bitrix.Loc.getMessage('OK_BTN')}}</button>\r\n    </div>\r\n  </div>\r\n  `,\r\n};\r\n","export const ErrorModal = {\n\tprops: [\"ERROR\"],\n\t/*html*/\n\ttemplate: `\n  <div style=\"position:relative; z-index:200;\">\n    <div @click=\"$emit('closeModal');\" class=\"overlay overlay-js active\"></div>\n    <div @click=\"$emit('closeModal');\" class=\"overlay overlay-desktop overlay-desktop-js active\"></div>\n    <div class=\"modal-loading-result flex fd-column ai-center ajax-error active\" style=\"height: fit-content;\">\n      <h3 class=\"modal-loading-result__title tac\">Ошибка</h3>\n      <p class=\"tac small\" style=\"text-align:left\" v-html=\"ERROR\"></p>\n      <button @click=\"$emit('closeModal');\" class=\"btn-red p13-24\">Окей</button>\n    </div>\n  </div>\n`,\n};\n","/**\n * теперь этот файл/поток будет кодироваться в UTF-8\n */\nimport { BitrixVue } from \"ui.vue3\";\nimport { SuccessModal } from \"./SuccessModal\";\nimport { ErrorModal } from \"./ErrorModal\";\nimport \"./fade.css\";\nimport \"./security.css\";\n\nexport class ChangePass {\n\t#app;\n\n\tconstructor(rootNode) {\n\t\tthis.rootNode = document.querySelector(rootNode);\n\t}\n\n\tinit() {\n\t\tthis.#app = BitrixVue.createApp({\n\t\t\tname: \"ChangePass\",\n\t\t\tcomponents: { SuccessModal, ErrorModal },\n\t\t\tdata() {\n\t\t\t\treturn {\n\t\t\t\t\tSuccess: false,\n\t\t\t\t\tError: false,\n\t\t\t\t\tfade: 0,\n\t\t\t\t\tresult: {},\n\n\t\t\t\t\tpassword: \"\",\n\t\t\t\t\tconfirm_password: \"\",\n\t\t\t\t\told_password: \"\",\n\t\t\t\t};\n\t\t\t},\n\t\t\tmounted() {\n\t\t\t\tthis.fade++;\n\t\t\t},\n\t\t\tmethods: {\n\t\t\t\tSuccessDone() {\n\t\t\t\t\tthis.Success = false;\n\t\t\t\t},\n\t\t\t\tErrorDone() {\n\t\t\t\t\tthis.Error = false;\n\t\t\t\t},\n\t\t\t\tsave() {\n\t\t\t\t\tBX.ajax({\n\t\t\t\t\t\turl: \"https://itin.online/local/api/change.pass/default.php\",\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tpassword: this.password,\n\t\t\t\t\t\t\tconfirm_password: this.confirm_password,\n\t\t\t\t\t\t\told_password: this.old_password,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\ttimeout: 30,\n\t\t\t\t\t\tasync: true,\n\t\t\t\t\t\tprocessData: true,\n\t\t\t\t\t\tscriptsRunFirst: true,\n\t\t\t\t\t\temulateOnload: true,\n\t\t\t\t\t\tstart: true,\n\t\t\t\t\t\tcache: false,\n\t\t\t\t\t\tonsuccess: (data) => {\n\t\t\t\t\t\t\t// обработка ответа\n\t\t\t\t\t\t\tlet res = JSON.parse(data);\n\t\t\t\t\t\t\tif (res.SUCCESS == \"Y\") {\n\t\t\t\t\t\t\t\tthis.Success = true;\n\t\t\t\t\t\t\t\tthis.disableBtns = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.Error = res.ERROR;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonfailure: (err) => {\n\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t\tcomputed: {\n\t\t\t\tdisableBtns() {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.password !== \"\" &&\n\t\t\t\t\t\tthis.confirm_password !== \"\" &&\n\t\t\t\t\t\tthis.old_password !== \"\"\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t/* html */\n\t\t\ttemplate: `\n\t\t\t\t\t<Transition>\n\t\t\t\t\t\t<SuccessModal @closeModal=\"SuccessDone\" v-if=\"Success\"></SuccessModal>\n\t\t\t\t\t</Transition>\n\n\t\t\t\t\t<Transition>\n\t\t\t\t\t\t<ErrorModal :ERROR=\"this.Error\" @closeModal=\"ErrorDone\" v-if=\"Error\"></ErrorModal>\n\t\t\t\t\t</Transition>\n\n\t\t\t\t\t<Transition>\n\t\t\t\t\t\t<div v-if=\"fade\" >\n\t\t\t\t\t\t\t<form class=\"security-form security-form--js form--js\">\n\n\t\t\t\t\t\t\t\t<div class=\"security-inputs-group flex fd-column\">\n\t\t\t\t\t\t\t\t\t<div class=\"form-input-field-group form-input-field-group--js\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"password\" :placeholder=\"this.$Bitrix.Loc.getMessage('MAIN_AUTH_CHD_FIELD_PASS3')\" name=\"old_password\" v-model=\"old_password\" >\n\t\t\t\t\t\t\t\t\t\t<label class=\"js-label-password\" for=\"old_password\">{{this.$Bitrix.Loc.getMessage('MAIN_AUTH_CHD_FIELD_PASS3')}}</label>\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"eye-button eye-button--js\"></button>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"form-input-field-group form-input-field-group--js\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"password\" :placeholder=\"this.$Bitrix.Loc.getMessage('MAIN_AUTH_CHD_FIELD_PASS')\" name=\"password\" v-model=\"password\" >\n\t\t\t\t\t\t\t\t\t\t<label class=\"js-label-password\" for=\"password\">{{this.$Bitrix.Loc.getMessage('MAIN_AUTH_CHD_FIELD_PASS')}}</label>\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"eye-button eye-button--js\"></button>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"form-input-field-group form-input-field-group--js\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"password\" :placeholder=\"this.$Bitrix.Loc.getMessage('MAIN_AUTH_CHD_FIELD_PASS2')\" name=\"confirm_password\" v-model=\"confirm_password\" >\n\t\t\t\t\t\t\t\t\t\t<label class=\"js-label-password\" for=\"confirm_password\">{{this.$Bitrix.Loc.getMessage('MAIN_AUTH_CHD_FIELD_PASS2')}}</label>\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"eye-button eye-button--js\"></button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<button @click=\"save\" class=\"security-btn btn-blue p13-24 sign-in-btn\" type=\"submit\" :disabled=\"disableBtns\">{{this.$Bitrix.Loc.getMessage('MAIN_AUTH_CHD_FIELD_SUBMIT')}}</button>\n\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Transition>\n\t\t\t`,\n\t\t});\n\t\tthis.#app.mount(this.rootNode);\n\t}\n}\n// {{this.$Bitrix.Loc.getMessage('DELETE_BTN')}}\n"],"names":["SuccessModal","template","ErrorModal","props","_app","WeakMap","ChangePass","rootNode","babelHelpers","classCallCheck","_classPrivateFieldInitSpec","writable","value","document","querySelector","createClass","key","init","classPrivateFieldSet","BitrixVue","createApp","name","components","data","Success","Error","fade","result","password","confirm_password","old_password","mounted","methods","SuccessDone","ErrorDone","save","_this","BX","ajax","url","method","timeout","async","processData","scriptsRunFirst","emulateOnload","start","cache","onsuccess","res","JSON","parse","SUCCESS","disableBtns","ERROR","onfailure","err","console","error","computed","classPrivateFieldGet","mount"],"mappings":"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"}